<div class="list-container">
    <div class="list-header">
        <h2>Listado de Personas</h2>
        <button class="btn btn-new" (click)="abrirModalCrear()">
            <i class="fas fa-plus"></i> Nueva Persona
        </button>
    </div>

    @if (isLoading) {
        <p>Cargando personas...</p>
    } @else if (error) {
        <div class="error-message">{{ error }}</div>
    } @else if (personas.length > 0) {
        @for (persona of personas; track persona.id) {
            <app-persona-list-item
                [persona]="persona"
                (view)="onVerPersona($event)"
                (edit)="onEditarPersona($event)"
                (delete)="onBorrarPersona($event)">
            </app-persona-list-item>
        }
    } @else {
        <p>No se encontraron personas.</p>
    }

    <!-- Modal de detalle -->
    <app-persona-detail-modal
        [persona]="personaSeleccionada"
        [isVisible]="modalVisible"
        (closeModal)="cerrarModal()"
        (edit)="onEditarDesdeModal($event)"
        (delete)="onBorrarDesdeModal($event)">
    </app-persona-detail-modal>

    <!-- Modal de edición -->
    <app-persona-edit-modal
        [persona]="personaSeleccionada"
        [isVisible]="editModalVisible"
        (closeModal)="cerrarEditModal()"
        (personaUpdated)="onPersonaActualizada()">
    </app-persona-edit-modal>

    <!-- Modal de creación -->
    <app-persona-create-modal
        [isVisible]="createModalVisible"
        (closeModal)="cerrarCreateModal()"
        (personaCreated)="onPersonaCreada()">
    </app-persona-create-modal>
</div>
