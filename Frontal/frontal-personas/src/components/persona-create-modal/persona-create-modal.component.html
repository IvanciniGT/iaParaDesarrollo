@if (isVisible) {
  <div class="modal-overlay" (click)="onOverlayClick($event)">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Crear Nueva Persona</h2>
        <i class="fas fa-times close-button" (click)="cerrarModal()"></i>
      </div>
      
      <form [formGroup]="personaForm" (ngSubmit)="onSubmit()">
        <div class="modal-body">
          @if (error) {
            <div class="error-message">{{ error }}</div>
          }
          
          <div class="form-group">
            <label for="nombre">Nombre *</label>
            <input 
              type="text" 
              id="nombre" 
              formControlName="nombre"
              class="form-control"
              [class.error]="getFieldError('nombre')"
              placeholder="Ingrese el nombre completo">
            @if (getFieldError('nombre')) {
              <span class="field-error">{{ getFieldError('nombre') }}</span>
            }
          </div>
          
          <div class="form-group">
            <label for="dni">DNI *</label>
            <input 
              type="text" 
              id="dni" 
              formControlName="dni"
              class="form-control"
              [class.error]="getFieldError('dni')"
              placeholder="12345678A"
              maxlength="9">
            @if (getFieldError('dni')) {
              <span class="field-error">{{ getFieldError('dni') }}</span>
            }
          </div>
          
          <div class="form-group">
            <label for="email">Email *</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email"
              class="form-control"
              [class.error]="getFieldError('email')"
              placeholder="ejemplo@correo.com">
            @if (getFieldError('email')) {
              <span class="field-error">{{ getFieldError('email') }}</span>
            }
          </div>
          
          <div class="form-group">
            <label for="edad">Edad *</label>
            <input 
              type="number" 
              id="edad" 
              formControlName="edad"
              class="form-control"
              [class.error]="getFieldError('edad')"
              placeholder="Edad en aÃ±os"
              min="1"
              max="120">
            @if (getFieldError('edad')) {
              <span class="field-error">{{ getFieldError('edad') }}</span>
            }
          </div>
        </div>
        
        <div class="modal-footer">
          <button 
            type="button" 
            class="btn btn-secondary" 
            (click)="cerrarModal()"
            [disabled]="isLoading">
            Cancelar
          </button>
          <button 
            type="submit" 
            class="btn btn-success"
            [disabled]="isLoading || personaForm.invalid">
            @if (isLoading) {
              <i class="fas fa-spinner fa-spin"></i> Creando...
            } @else {
              <i class="fas fa-plus"></i> Crear
            }
          </button>
        </div>
      </form>
    </div>
  </div>
}
